(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.GamepadMicro = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var GamepadMicro;!function(){var t,e,a,i,n,s,o,d,p,m,r,h,c,u,l,g,_,f,v="gamepadconnected",w="gamepaddisconnected",b="standard",k="GamepageMicro: ",G=navigator;GamepadMicro=function(){this.buttonKeys=["actionSouth","actionEast","actionWest","actionNorth","leftBumper","rightBumper","leftTrigger","rightTrigger","select","start","leftStick","rightStick","dPadUp","dPadDown","dPadLeft","dPadRight","extra"],this._ticking=!1,this._prevTimestamps=[],this._connectionListening=!1,this._updateCallback=function(){},this._prevRawGamepadTypes=[],this.gamepadConnected=e.length>0,this.gamepadSupported=!!i(),this.gamepads=[],this._heldButtonDelay=200,this._heldTimestampByGamepad={}},t=function(){return{leftStick:{x:0,y:0},rightStick:{x:0,y:0},dPad:{x:0,y:0},buttons:{},_pressed:{},timestamp:0}},i=function(){return G.getGamepads||!!G.webkitGetGamepads||!!G.webkitGamepads},e=function(){var t=G.getGamepads&&G.getGamepads()||G.webkitGetGamepads&&G.webkitGetGamepads(),e=[];if(t)for(var a=0,i=t.length;a<i;a++){var n=t[a];n&&n.mapping===b&&e.push(n)}return e},a=function(t,e){if(!t||!t.buttons||e>=t.buttons.length)return!1;var a,i=t.buttons[e];return!!i&&(a=i,"object"==typeof i&&(a=i.value),1===a)},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,s=function(){this._updateCallback(this.gamepads)},o=function(){this._connectionListening||(window.addEventListener(v,p,!1),window.addEventListener(w,m,!1),this._connectionListening=!0)},d=function(){this._connectionListening&&(window.removeEventListener(v,p),window.removeEventListener(w,m),this._connectionListening=!1)},p=function(e){var a=e.gamepad;a.mapping===b&&(this.gamepads[a.index]=t(),this.gamepadConnected=!0,this._update())},m=function(t){var e=t.gamepad,a=this.gamepads;a.forEach(function(t,i){i===e.index&&a.splice(i,1)}),a.length||(this.gamepadConnected=!1),this._update()},r=function(){for(var t=e(),a=!1,i={},n=0,s=0;s<t.length;s++){var o,d,p=t[s];p.timestamp&&(n=p.index,o=this._heldTimestampByGamepad[n]||{},d=0===Object.keys(o).length,p.timestamp===this._prevTimestamps[n]&&d||(this._prevTimestamps[n]=p.timestamp,i[n]=p,a=!0))}return!!a&&i},h=function(){var e=this._checkForGamepadChange();if(e){this.gamepadConnected=!0,this.gamepadSupported=!0;var i=this.gamepads,n=this.buttonKeys;Object.keys(e).map(function(s){var o=e[s];if(o){typeof o!=this._prevRawGamepadTypes[s]&&(this._prevRawGamepadTypes[s]=typeof m);for(var d,p={},m=i[s]||t(),r=this._heldTimestampByGamepad[s]||{},h=0,c=n.length;h<c;h++){var u,l=n[h],g=r[l],_=!!m._pressed[l],f=m._pressed[l]=a(o,h),v=Date.now();_&&!f?(p[l]={released:!0,held:!1},r&&delete r[l]):f&&(g?(u=g.gamepadTimestamp===o.timestamp,(u&&v>g.browserTimestamp+this._heldButtonDelay||o.timestamp>g.gamepadTimestamp+this._heldButtonDelay)&&(p[l]={held:!0})):r[l]={gamepadTimestamp:o.timestamp,browserTimestamp:v})}this._heldTimestampByGamepad[s]=r,m.timestamp=o.timestamp,m.buttons=p,d=o.axes,m.leftStick.x=d[0],m.leftStick.y=d[1],m.rightStick.x=d[2],m.rightStick.y=d[3],m.dPad.x=(p.dPadLeft?-1:0)+(p.dPadRight?1:0),m.dPad.y=(p.dPadUp?-1:0)+(p.dPadDown?1:0),this.gamepads[s]=m}}.bind(this)),this._update()}},c=function(){this._ticking||(this._ticking=!0,this._tick())},u=function(){this._ticking=!1},l=function(){this._poll(),this._ticking&&(n?n(this._tick.bind(this)):console.warn(k+"This browser doesn't support requestAnimationFrame. Probably means that Gamepad API isn't supported either."))},g=function(t){return i?(this._updateCallback=t,this._addEvents(),void this._setupPoll()):void console.warn(k+"This browser doesn't support Gamepad API, so onUpdate shouldn't be called.")},_=function(){return i?(this._updateCallback=!1,this._removeEvents(),void this._removePoll()):void console.warn(k+"This browser doesn't support Gamepad API, so offUpdate shouldn't be called.")},f=GamepadMicro.prototype,f._update=s,f._addEvents=o,f._removeEvents=d,f._onGamepadConnected=p,f._onGamepadDisconnected=m,f._checkForGamepadChange=r,f._poll=h,f._setupPoll=c,f._removePoll=u,f._tick=l,f.onUpdate=g,f.offUpdate=_}(),module.exports=GamepadMicro;
},{}]},{},[1])(1)
});